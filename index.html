<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="basket">
    </div>

    <script>
        /*
        1. Создать функцию, генерирующую шахматную доску. Можно использовать любые html-теги.
        Доска должна быть верно разлинована на черные и белые ячейки. Строки должны нумероваться
        числами от 1 до 8, столбцы — латинскими буквами A, B, C, D, E, F, G, H.
        */

        let letters = ['', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']
        let numbers = [8, 7, 6, 5, 4, 3, 2, 1]
        function createBlackCell() {
            let blackCell = document.createElement('div');
            blackCell.className = 'black';
            return blackCell;
        }

        function createWhiteCell() {
            let whiteCell = document.createElement('div');
            whiteCell.className = 'white';
            return whiteCell;
        }

        function createSign() {
            let signCell = document.createElement('div');
            signCell.className = 'sign';
            return signCell;
        }

        function createRow(num) {
            let row = document.createElement('div');
            row.className = 'row';
            document.body.appendChild(row);
            let number = createSign();
            number.innerHTML = num;
            row.appendChild(number);
            return row
        }

        function createStartWhite(num) {
            row = createRow(num);
            for (i = 0; i < 4; i++) {
                row.appendChild(createWhiteCell());
                row.appendChild(createBlackCell());
            }
        }

        function createStartBlack(num) {
            row = createRow(num);
            for (i = 0; i < 4; i++) {
                row.appendChild(createBlackCell());
                row.appendChild(createWhiteCell());
            }
        }
        function drawСhessboard() {
            k = 0;
            v = 1;
            for (j = 0; j < 4; j++) {
                createStartWhite(numbers[k]);
                createStartBlack(numbers[v]);
                k += 2;
                v += 2;
            }

            for (k = 0; k <= 8; k++) {
                let el = createSign();
                document.body.appendChild(el);
                el.innerHTML = letters[k];
            }

        }

        drawСhessboard();

        /*
        2. Сделать генерацию корзины динамической: верстка корзины не должна находиться в HTML-структуре. 
        Там должен быть только div, в который будет вставляться корзина, сгенерированная на базе JS:
        Пустая корзина должна выводить строку «Корзина пуста»;
        Наполненная должна выводить «В корзине: n товаров на сумму m рублей».
        */
        let isEmpty = +prompt('Введите 0, чтобы отобразить пустую корзину, 1 - для отображения полной: ')

        let userBasket = {
            basket: {},
            addToBasket: function (item) {
                this.basket[item.name] = { price: item.price, amount: item.amount }
            },
            addItemAmount: function (itemName) {
                this.basket[itemName]['amount'] += 1; // увеличиваем число едениц товара
            },
            countBasketPrice: function () {
                let basketPrice = 0;
                let basketAmount = 0;
                for (item in this.basket) {
                    basketPrice += (this.basket[item]['price'] * this.basket[item]['amount']);
                    basketAmount += this.basket[item]['amount'];
                }
                return [basketPrice, basketAmount];
            }

        }

        function Product(name, price, amount) {
            this.name = name;
            this.amount = amount;
            this.price = price;
            return { name: this.name, price: this.price, amount: this.amount }
        }

        let item1 = new Product('first item', 1200, 1)
        let item2 = new Product('second item', 1500, 1)
        let item3 = new Product('third item', 3000, 1)

        userBasket.addToBasket(item1);
        userBasket.addToBasket(item2);
        userBasket.addToBasket(item3);
        userBasket.addItemAmount('first item') // увеличиваем число едениц первого товара
        userBasket.addItemAmount('second item') // увеличиваем число едениц второго товара

        function createBasketView() {
            let basketView = document.getElementsByClassName('basket');
            let basketImg = document.createElement('img');
            basketImg.src = "img/basket.png";
            basketImg.style.maxWidth = '50px';
            let basketText = document.createElement('p');
            basketText.className = 'basketText';
            basketView[0].appendChild(basketImg);
            basketView[0].appendChild(basketText);
            if (isEmpty == 0) {
                basketText.innerText = 'Корзина пуста';
            }
            else if (isEmpty == 1) {
                res = userBasket.countBasketPrice();
                basketText.innerText = `В корзине: ${res[1]} товаров на сумму ${res[0]} рублей`
            }
            else alert('Введите либо 0, либо 1')
        }

        createBasketView();



    </script>
</body>

</html>